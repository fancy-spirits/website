---
import Card from '../components/Card.astro';
import Layout from '../layouts/BaseLayout.astro';
---

<Layout title="Fancy Spirits: Submit Music" route="demo">
    <section class="wrapper">
      <h1>Submit your music</h1>
      <p> At Fancy Spirits, we are always on the lookout for fresh and exciting music submissions that push the boundaries and challenge the norms of the electronic music scene. We believe in supporting small artists and providing a platform for emerging talents to showcase their creativity and passion, regardless of whether it's their first release or not.
We value innovation, originality, and skill, and we welcome submissions from artists who are dedicated to crafting unique and compelling sounds. Whether you're experimenting with new genres, blending styles, or pushing the limits of conventional production techniques, we want to hear from you.
 So, if you're ready to share your musical vision with the world, don't hesitate to submit your tracks. We can't wait to hear what you've got! </p>
    </section>

      <main class="main">
        <Card class="submission">
            <div class="submission-form">
            <h2>Submit Your Track</h2>
            <form @submit.prevent="submitForm">
                <div v-for="(track, index) in tracks" :key="index">
                <!-- <h3>Track { index + 1 }: </h3> -->
                <h3>Track index: </h3>
                <label for="track_title">Track Title:</label>
                <input type="text" v-model="track.title" required class="input-field">
    
                <label for="artist_name">Artist Name(s):</label>
                <input type="text" v-model="track.artist" required class="input-field">
    
                <label for="file_url">File URL:</label>
                <input type="url" v-model="track.file_url" required class="input-field">
                <small>(File must be stream and downloadable)</small>
    
                <br>

                <button type="button" @click="removeTrack(index)" v-if="index > 0" class="remove-button">Remove Track</button> 
                <p>todo: add space here</p>
                <hr>
                </div>
                
                <button type="button" @click="addTrack" v-if="tracks.length < 5" class="add-button">Add Track</button>
    
                <label for="email">Email Address:</label>
                <input type="email" v-model="submission.email" required class="input-field">
    
                <label for="about_artist">About Yourself (Optional):</label>
                <textarea v-model="submission.about_artist" class="text-area"></textarea>
    
                <button type="submit" class="submit-button">Submit</button>
            </form>
            </div>
        </Card>
      </main>
    </section>
  </Layout>
  
<style>
    .input-field, .text-area {
    width: 100%;
    padding: 0.5em;
    margin-bottom: 1em;
    border: 1px solid #ccc;
    border-radius: 4px;
    }

    .remove-button, .add-button, .submit-button {
    background-color: #4CAF50;
    color: white;
    padding: 0.5em 1em;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    }

    .remove-button:hover, .add-button:hover, .submit-button:hover {
    background-color: #45a049;
    }

    .remove-button {
    background-color: #f44336;
    }

    .remove-button:hover {
    background-color: #da190b;
    }

    .add-button {
    background-color: #008CBA;
    }

    .add-button:hover {
    background-color: #0077A3;
    }

    .submit-button {
    background-color: #4CAF50;
    }

    .submit-button:hover {
    background-color: #45a049;
    }

</style>

<script>
import { ref } from 'vue';

let index = 0;

const tracks = ref([
  { title: '', artist: '', file_url: '' }
]);

const submission = {
  email: '',
  about_artist: ''
};

const addTrack = () => {
  if (tracks.value.length < 5) {
    tracks.value.push({ title: '', artist: '', file_url: '' });
  }
};

const removeTrack = (index) => {
  tracks.value.splice(index, 1);
};

const submitForm = () => {
  // Combine submission data with track details
  const combinedSubmission = {
    ...submission,
    tracks: tracks.value
  };
  // TODO: Send combined submission data to server and perform validation
};
</script>

<style>
.wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 1.75em;
}

.main {
  width: fit-content;
}

h1 {
  font-family: "IBM Plex Sans";
  font-weight: 600;
  font-size: 2rem;
  width: 80%;
}

.submission-form {
  margin-top: 2em;
}

h2 {
  font-size: 1.5rem;
  margin-bottom: 1em;
}

button {
  margin-top: 1em;
}

@media (max-width: 800px) {
  .main {
    width: 95%;
  }

  main iframe {
    max-width: 100%;
  }
}
</style>
